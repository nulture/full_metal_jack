[gd_scene load_steps=11 format=3 uid="uid://c1aiimxh63ws2"]

[ext_resource type="Script" path="res://assets/scripts/wave_controller.gd" id="1_8vdcl"]
[ext_resource type="PackedScene" uid="uid://b05qweh6rynu0" path="res://assets/models/level_meshes/fmj_level_mesh.glb" id="1_qhwj3"]
[ext_resource type="Script" path="res://assets/scripts/wave.gd" id="2_ywm6p"]
[ext_resource type="PackedScene" uid="uid://clq3nof8vclwo" path="res://assets/scenes/enemies/stinker.tscn" id="3_s3gsa"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_xyfmq"]
height = 10.0
radius = 19.0

[sub_resource type="NavigationMesh" id="NavigationMesh_8rbwc"]
vertices = PackedVector3Array(-49.5, 0.4, -16.5, -33, 0.4, -16, -32.5, 0.4, -19.5, -49.5, 0.4, -49.5, 0, 0.4, -37.5, 0, 0.4, -49.5, 32.5, 0.4, -19.5, 33, 0.4, -16, 49.5, 0.4, -16.5, 49.5, 0.4, -49.5, -9.5, 4.4, 30, -13, 4.4, 29, -3, 4.4, 35.5, 1, 4.4, 36.5, 0.5, 4.4, 35, 9.5, 4.4, -30, 13, 4.4, -29, 3, 4.4, -35.5, -1, 4.4, -36.5, -0.5, 4.4, -35, -30.5, 4.4, 17.5, -32, 4.4, 18.5, -23, 4.4, 24, 30.5, 4.4, -17.5, 32, 4.4, -18.5, 23, 4.4, -24, -32, 4.4, -18.5, -30.5, 4.4, -17.5, 32, 4.4, 18.5, 30.5, 4.4, 17.5, -29.5, 0.4, 17, -9.5, 0.4, 29, 0.5, 0.4, 34, 29.5, 0.4, -17, 9.5, 0.4, -29, -0.5, 0.4, -34, 29.5, 0.4, 17, -29.5, 0.4, -17, -49.5, 0.4, 16.5, -33, 0.4, 16, 33, 0.4, 16, 49.5, 0.4, 16.5, -32.5, 0.4, 19.5, -49.5, 0.4, 49.5, 0, 0.4, 49.5, 0, 0.4, 37.5, 32.5, 0.4, 19.5, 49.5, 0.4, 49.5)
polygons = [PackedInt32Array(0, 2, 1), PackedInt32Array(0, 3, 2), PackedInt32Array(2, 3, 4), PackedInt32Array(4, 3, 5), PackedInt32Array(8, 7, 6), PackedInt32Array(8, 6, 9), PackedInt32Array(9, 6, 4), PackedInt32Array(9, 4, 5), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 10), PackedInt32Array(10, 12, 11), PackedInt32Array(18, 17, 19), PackedInt32Array(19, 17, 15), PackedInt32Array(15, 17, 16), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 11), PackedInt32Array(11, 20, 10), PackedInt32Array(24, 23, 25), PackedInt32Array(25, 23, 16), PackedInt32Array(16, 23, 15), PackedInt32Array(19, 27, 18), PackedInt32Array(18, 27, 26), PackedInt32Array(20, 21, 27), PackedInt32Array(27, 21, 26), PackedInt32Array(14, 29, 13), PackedInt32Array(13, 29, 28), PackedInt32Array(29, 23, 28), PackedInt32Array(28, 23, 24), PackedInt32Array(32, 31, 30), PackedInt32Array(35, 34, 33), PackedInt32Array(37, 35, 30), PackedInt32Array(30, 35, 32), PackedInt32Array(32, 35, 36), PackedInt32Array(36, 35, 33), PackedInt32Array(39, 38, 1), PackedInt32Array(1, 38, 0), PackedInt32Array(7, 8, 40), PackedInt32Array(40, 8, 41), PackedInt32Array(38, 39, 42), PackedInt32Array(38, 42, 43), PackedInt32Array(43, 42, 45), PackedInt32Array(43, 45, 44), PackedInt32Array(41, 46, 40), PackedInt32Array(41, 47, 46), PackedInt32Array(46, 47, 45), PackedInt32Array(45, 47, 44)]
cell_size = 0.5

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_1oqup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ib2f7"]
albedo_color = Color(0.1, 0.1, 0.1, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_yl8hx"]
material = SubResource("StandardMaterial3D_ib2f7")
size = Vector2(100, 100)

[sub_resource type="Resource" id="Resource_g8jmb"]
script = ExtResource("2_ywm6p")
enemies = {
ExtResource("3_s3gsa"): 1
}
crates = 0

[node name="arena" type="Node3D"]

[node name="spawn_area" type="Area3D" parent="."]
monitoring = false
monitorable = false

[node name="collision_shape_3d" type="CollisionShape3D" parent="spawn_area"]
shape = SubResource("CylinderShape3D_xyfmq")

[node name="nav_region" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_8rbwc")

[node name="floor" type="StaticBody3D" parent="nav_region"]

[node name="collision_shape_3d" type="CollisionShape3D" parent="nav_region/floor"]
shape = SubResource("WorldBoundaryShape3D_1oqup")

[node name="mesh_instance_3d" type="MeshInstance3D" parent="nav_region/floor"]
mesh = SubResource("PlaneMesh_yl8hx")

[node name="fmj_level_mesh" parent="nav_region" instance=ExtResource("1_qhwj3")]

[node name="wave_controller" type="Node" parent="."]
script = ExtResource("1_8vdcl")
predefined_waves = Array[ExtResource("2_ywm6p")]([SubResource("Resource_g8jmb")])

[editable path="nav_region/fmj_level_mesh"]
